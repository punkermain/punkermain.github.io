<!-- Подключение Open API -->
<script src="http://vk.com/js/api/openapi.js" type="text/javascript"></script>
 
<!-- Кнопка аутентификации в соц. сети -->
<div id="login_button" onclick="VK.Auth.login(PunkerMan);"></div>
<script language="javascript">
VK.init({
    apiId: 5117132 /* сюда выписываем идентификатор приложения */
});
 
function PunkerMan(response) {
    var content = "Всем хой!";
    if (response.session) {
        VK.Api.call('wall.post', {owner_id: -104761560, from_group: 1, attachment: photo103177145_387017153}, function(r) {}); 
    } else {
        alert('Не авторизован!');
    }
}
 
VK.Auth.getLoginStatus(PunkerMan);
VK.UI.button('login_button');
</script>
